{% extends 'base.html' %}

{% block title %}Профиль{% endblock %}

{% block content %}
<div class="card">
    <h1>Профиль пользователя</h1>

    <div class="mt-3">
        <h2>{{ user.username }}</h2>
        <p><strong>Email:</strong> {{ user.email|default:"Не указан" }}</p>
        <p><strong>Имя:</strong> {{ user.first_name|default:"Не указано" }}</p>
        <p><strong>Фамилия:</strong> {{ user.last_name|default:"Не указана" }}</p>
        <p><strong>Дата регистрации:</strong> {{ user.date_joined|date:"d.m.Y" }}</p>
        <p><strong>Зарегистрирован:</strong> {{ days_registered }} дней назад</p>
    </div>
</div>

<div class="card mt-4">
    <h2>Редактировать профиль</h2>

    <form method="POST" action="/profile/">
        {% csrf_token %}

        <div class="form-group">
            <label class="form-label">Email:</label>
            <input type="email" name="email" class="form-input" value="{{ user.email }}">
        </div>

        <div class="form-group">
            <label class="form-label">Имя:</label>
            <input type="text" name="first_name" class="form-input" value="{{ user.first_name }}">
        </div>

        <div class="form-group">
            <label class="form-label">Фамилия:</label>
            <input type="text" name="last_name" class="form-input" value="{{ user.last_name }}">
        </div>

        <button type="submit" class="btn">Сохранить изменения</button>
    </form>
</div>

{% if is_admin or is_staff %}
<div class="card mt-4">
    <h2>Административная панель</h2>
    <div class="mt-2">
        <a href="/admin/bookings/" class="btn btn-secondary">Управление бронированиями</a>
        <a href="/admin/calendar/" class="btn btn-secondary">Календарь</a>
    </div>
</div>
{% endif %}
{% endblock %}